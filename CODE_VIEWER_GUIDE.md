# AI代码查看器使用指南

## 功能概述

这是一个类似VSCode的代码查看器，用于展示AI Agent生成的代码项目。当您在聊天界面选择"Agent"模式时，AI会生成代码并自动跳转到代码查看界面。

## 主要功能

### 1. 项目管理
- ✅ 自动加载AI生成的项目列表
- ✅ 支持多个项目切换
- ✅ 项目文件树展示

### 2. 文件浏览
- ✅ 左侧文件树导航
- ✅ 支持文件夹展开/收起
- ✅ 文件图标识别（Python、JavaScript、Vue、JSON等）
- ✅ 文件大小显示

### 3. 代码查看
- ✅ 语法高亮显示
- ✅ 支持多种编程语言
- ✅ 只读模式，专注于代码查看
- ✅ 深色主题，类似VSCode

### 4. 标签页管理
- ✅ 多文件标签页支持
- ✅ 点击文件名打开新标签
- ✅ 点击 ❌ 关闭标签
- ✅ 活动标签高亮显示

### 5. 项目下载
- ✅ 一键下载整个项目
- ✅ 打包为tar.gz格式
- ✅ 自动命名下载文件

## 使用步骤

### 1. 生成代码项目
1. 在聊天界面选择 **Agent** 模式
2. 输入您的项目需求，例如：
   - "创建一个Vue3的待办事项应用"
   - "写一个Python的API服务器"
   - "实现一个简单的计算器程序"
3. AI会生成代码并自动跳转到代码查看器

### 2. 浏览项目代码
1. **左侧文件树**：显示项目的文件结构
2. **点击文件**：在右侧打开文件内容
3. **文件夹图标**：📁 (关闭) / 📂 (打开)
4. **文件图标**：根据文件类型显示不同图标

### 3. 管理打开的文件
1. **标签栏**：显示所有打开的文件
2. **切换文件**：点击标签切换到对应文件
3. **关闭文件**：点击标签上的 ❌ 按钮
4. **文件信息**：显示文件路径和大小

### 4. 下载项目
1. 点击右上角的 **"下载项目"** 按钮
2. 系统会自动打包整个项目为 `.tar.gz` 文件
3. 浏览器会自动下载文件

## 支持的文件类型

### 编程语言
- **Python** (🐍): `.py` 文件
- **JavaScript** (📜): `.js` 文件  
- **TypeScript** (📘): `.ts` 文件
- **Vue** (💚): `.vue` 文件
- **HTML** (🌐): `.html` 文件
- **CSS** (🎨): `.css`, `.scss` 文件

### 配置文件
- **JSON** (📋): `.json` 文件
- **YAML** (⚙️): `.yml`, `.yaml` 文件
- **XML** (📰): `.xml` 文件

### 文档文件
- **Markdown** (📝): `.md` 文件
- **文本** (📄): `.txt` 文件
- **README** (📖): `README.*` 文件

## 界面说明

### 顶部工具栏
- **← 返回聊天**：返回到聊天界面
- **项目名称**：当前查看的项目名
- **下载项目**：下载当前项目

### 左侧文件树
- **资源管理器**：文件和文件夹浏览
- **项目选择器**：多项目时可切换项目
- **文件图标**：直观显示文件类型

### 右侧代码区
- **标签栏**：管理打开的文件
- **文件信息栏**：显示文件路径和大小
- **代码编辑器**：语法高亮的代码显示

## 快捷操作

- **打开文件**：单击文件树中的文件
- **关闭文件**：点击标签上的 ❌
- **切换文件**：点击不同的标签
- **返回聊天**：点击左上角返回按钮

## 技术特性

### 前端技术
- **Vue 3** + **Composition API**
- **CodeMirror 6** - 代码编辑器
- **语法高亮** - 支持多种编程语言
- **响应式设计** - 适配不同屏幕尺寸

### 后端技术  
- **FastAPI** - 高性能API框架
- **文件系统访问** - 安全的文件读取
- **项目打包** - tar.gz格式下载

### 安全特性
- **路径遍历防护** - 防止非法文件访问
- **文件类型检查** - 只显示文本文件内容
- **只读模式** - 专注于代码查看

## 示例项目

系统预置了几个示例项目：

1. **test_project** - Python基础项目
   - 包含主程序、工具函数、配置文件
   - 展示Python项目结构

2. **vue_todo_app** - Vue 3待办事项应用
   - 完整的Vue 3项目结构
   - 组件化开发示例

3. **python_api_server** - FastAPI服务器
   - RESTful API设计
   - 用户和任务管理功能

## 故障排除

### 项目列表为空
- 确保后端服务正在运行
- 检查 `tmp_code_generation` 目录是否存在项目

### 文件无法打开
- 确认文件是文本格式
- 检查文件路径是否正确

### 下载失败
- 检查浏览器下载设置
- 确认项目目录存在且可访问

## 开发信息

- **前端端口**：http://localhost:5173
- **后端端口**：http://localhost:8000  
- **API文档**：http://localhost:8000/docs
- **项目目录**：`tmp_code_generation/`

---

🎉 享受使用AI代码查看器！如有问题请查看控制台日志或联系开发团队。
